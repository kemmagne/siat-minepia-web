<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:fn="http://java.sun.com/jsp/jstl/functions">

	<br />

	<p:panel header="#{bundle['Alert_history_title']}">
		<h:form id="alertListForm">

			<p:dataTable id="datalist" binding="#{table}" widgetVar="datalistTable" filteredValue="" var="item" selectionMode="single"
				selection="#{historyAlertController.selected}" rowKey="#{item.id}" value="#{historyAlertController.historyModelsList}" rows="5"
				paginator="true" rowsPerPageTemplate="5,10,20" emptyMessage="#{bundle['AucuneResultat']}" styleClass="newui-datatable fixeColumnWidth"
				paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
				currentPageReportTemplate="({startRecord} - {endRecord} sur {totalRecords})">

				<p:columnGroup type="header">
					<p:row>
						<p:column>
							<f:facet name="header">
								<h:outputText value="#{bundle['AlertHistoryLabel_id']}" title="#{bundle['AlertHistoryTitle_id']}" />
							</f:facet>
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="#{bundle['AlertHistoryLabel_date']}" title="#{bundle['AlertHistoryTitle_dateLabel']}" />
							</f:facet>
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="#{bundle['AlertHistoryLabel_user']}" title="#{bundle['AlertHistoryTitle_user']}" />
							</f:facet>
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="#{bundle['AlertHistoryLabel_action']}" title="#{bundle['AlertHistoryTitle_action']}" />
							</f:facet>
						</p:column>
						<p:column headerText="#{bundle['AlertHistoryLabel_ip']}">
							<f:facet name="header">
								<h:outputText value="#{bundle['AlertHistoryLabel_ip']}" title="#{bundle['AlertHistoryTitle_ip']}" />
							</f:facet>
						</p:column>
					</p:row>
				</p:columnGroup>
				<p:subTable var="historyModel" value="#{item.listAuditEntity}">
					<f:facet name="header">
						<h:outputText
							value="#{bundle['AlertHistory_name']} # #{item.idModel} (#{fn:length(item.listAuditEntity)} #{bundle['AlertHistory_enter']})" />
					</f:facet>
					<p:column>
						<h:outputText value="#{historyModel.idModel}" />
					</p:column>
					<p:column>
						<h:outputText value="#{historyModel.auditDate}">
							<f:convertDateTime type="date" pattern="dd/MM/yyyy" locale="fr" />
						</h:outputText>
					</p:column>
					<p:column>
						<h:outputText value="#{historyModel.username}" />
					</p:column>
					<p:column>
						<h:outputText value="#{historyModel.action}" />
					</p:column>
					<p:column>
						<h:outputText value="#{historyModel.ipAddress}" />
					</p:column>
					<p:columnGroup type="footer">
						<p:row />
					</p:columnGroup>
				</p:subTable>
			</p:dataTable>
		</h:form>
	</p:panel>

</ui:composition>
